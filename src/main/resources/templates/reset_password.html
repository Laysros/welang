<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">

<head>
	<meta charset="utf-8"></meta>
	<title>Reset Password</title>
	<link rel="stylesheet" href="../css/css/bootstrap.min.css" />
	<link rel="stylesheet" href="../css/font-awesome.min.css" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"/>
	<script src="../css/jquery-1.11.2.min.js"></script>
	<script src="../css/js/bootstrap.min.js"></script>
	<link rel="stylesheet" type="text/css" th:href="@{../css/style.css}" />
	<style>
	.form-gap {
    	margin-left:auto;
    	margin-right:auto;
	}
	</style>
</head>
<body>
<div class="jumbotron jumbotron-sm">
    <div class="container">
        <div class="row">
            <div class="col-sm-12 col-lg-12">
                <h1 class="h1">
                    Welang <small>You are on the way to reset the password</small></h1>
            </div>
        </div>
    </div>
</div>
<div class="form-gap"></div>
<div class="container">
	<div class="row">
		<div class="col-md-5 col-md-offset-5">
            <div class="panel panel-default">
              <div class="panel-body">
                <div class="text-center">
                  <h3><i class="fa fa-lock fa-4x"></i></h3>
                  <p>Please reset your password here</p>
                  <div class="panel-body">
    
                    <form action="submitResetPassword" method="post">
    				
                      <div class="form-group">
                          	<label>New Password</label>
				            <input  type="password" class="input-xlarge" id ="newpass"/>
				        </div>
				       <div class="form-group">
				            <label>Confirm Password</label>
				            <input type="password" class="input-xlarge" id="confirmpass" name="confirmPass"/>
                        </div>
                        <span id="confirmMessage" class="confirmMessage">Please enter your password</span>
                      <div class="form-group">
                      <input type="hidden" th:value="${key}" id="key" name="key"/>
                      <input type="hidden"  th:name="${_csrf.parameterName}"   th:value="${_csrf.token}"/>
                        <input id="changePassword" disabled="disabled" class="btn btn-lg btn-primary btn-block" value="Change Password" type="submit"/>
                      </div>
                    </form>
    
                  </div>
                </div>
              </div>
            </div>
          </div>
	</div>
</div>
</body>
<script type="text/javascript">
/*<![CDATA[*/
$("#newpass").keyup(function() {
		var password = $(this).val();
       if(password.length < 8){
       	$("#confirmMessage").html("Passwords is too short.");
       	$("#confirmMessage").css('color', 'red');
       }else{
       	$("#confirmMessage").html("Passwords is long enough :D");
       	$("#confirmMessage").css('color', 'green');
       }
       $("#changePassword").attr('disabled','disabled');
});
$("#confirmpass").keyup(function() {
       var password = $("#newpass").val();
       if(password.length >= 8){
       	if(password == $(this).val()){
	        	$("#confirmMessage").html("Passwords match.");
	        	$("#confirmMessage").css('color', 'green');
	        	$("#changePassword").removeAttr('disabled');
	        }else{
	        	$("#confirmMessage").html("Passwords do not match!");
	        	$("#confirmMessage").css('color', 'red');
	        	$("#changePassword").attr('disabled','disabled');
	        }	
       }
  });
/*]]>*/
</script>
</html>